---

- name: Install tar & gzip
  apt:
    name: "{{ item }}"
    state: present
  with_items:
    - tar
    - gzip

- name: Extract backend build (include copy)
  unarchive:
    src: ~/project/artifact.tar.gz
    dest: ~/

- name: Check unzip folder
  shell: |
    ls -la
    
- name: Start application
  shell: |
    cd backend
    npm install
    pm2 stop default
    pm2 start npm --start